<div class="wc__header{% if model.view == 'OPEN' %} wc__header--open{% endif %}">
  <div class="wc-header">
    {% if model.isBack %}
    <button class="wc-back-btn" aria-label="Back" data-wc-back-btn>
      <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 20 20">
        <path d="M4.828,11L12.314,18.485L10.899,19.899L1,10L10.899,0.101L12.314,1.515L4.828,9L19,9L19,11L4.828,11Z" fill="currentColor"/>
      </svg>
    </button>    
    {% endif %}
    <h2 class="wc-title">Floodline webchat</h2>
    {% if model.view == 'OPEN' or model.view == 'END' %}
    <button class="wc-hide-btn" aria-label="Hide chat" {% if model.isBack %}data-wc-back-btn{% else %}data-wc-close-btn{% endif %}>
      <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 20 20">
        <path d="M10 14.4l-7-7L4.4 6l5.6 5.6L15.6 6 17 7.4l-7 7z" fill="currentColor"/>
      </svg>
    </button>   
    {% else %}
    <button class="wc-close-btn" aria-label="Close window" {% if model.isBack %}data-wc-back-btn{% else %}data-wc-close-btn{% endif %}>
      <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 20 20">
        <path d="M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z" fill="currentColor"></path>
      </svg>
    </button>
    {% endif %}
  </div>
  {% if model.view == 'OPEN' %}
  <div class="wc-status">
    <p class="wc-status__content" data-wc-status>
      {{ model.status | safe }}
    </p>
    <div class="wc-status__button">
      <a href="#" role="button" class="wc-end-btn" data-wc-end-btn>End chat</a>
    </div>
  </div>
  {% endif %}
</div>
{% if model.view == 'PRECHAT' %}
<div class="wc__body">
  <div class="wc-prechat">
    <h3 class="govuk-heading-m">What you can use webchat for</h3>
    <p>Webchat lets you talk directly to a Floodline adviser.</p>
    <p>You can use webchat to get: </p>
    <ul class="govuk-list govuk-list--bullet">
      <li>current flood warnings and alerts in your area</li>
      <li>information on the flood warning service</li>
      <li>advice on what to do before, during and after a flood</li>
    </ul>
    <p>There are other ways to <a href="https://www.gov.uk/sign-up-for-flood-warnings">sign up for flood warnings</a> and <a href="https://defragroup.eu.qualtrics.com/jfe/form/SV_8uMAuaH3kbJl965?Source=https://check-for-flooding.service.gov.uk">manage your flood warnings account</a>.</p>
    <p>Do not use webchat to <a href="https://www.gov.uk/report-flood-cause">report a flood</a>.</p>
    <div data-wc-continue-chat></div>
    <h3 class="govuk-heading-m">Other flood information</h3>
    <p>Call Floodline for all other flood and flood warning information.</p>
    <p><strong>Floodline helpline</strong><br/>Telephone: 0345 988 1188<br>Textphone: 0345 602 6340<br>Open 24 hours a day, 7 days a week<br><a href="https://gov.uk/call-charges">Find out more about call charges</a></p>
  </div>
</div>
{% elif model.view == 'START' %}
<div class="wc__body">
  <div class="wc-prechat">
    <a href="#" class="wc-back-link" data-wc-back-prechat>Back</a>
    {% if model.error %}
    <div class="govuk-error-summary" data-module="govuk-error-summary" tabindex="-1" data-wc-error-summary>
      <div role="alert">
        <h3 class="govuk-error-summary__title">
          There is a problem
        </h2>
        <div class="govuk-error-summary__body">
          <ul class="govuk-list govuk-error-summary__list">
            {% if model.error.nameEmpty %}
            <li>
              <a href="#name" data-wc-error-summary-link>Enter your name</a>
            </li>
            {% endif %}
            {% if model.error.questionEmpty %}
            <li>
              <a href="#question" data-wc-error-summary-link>Enter your question</a>
            </li>
            {% endif %}
            {% if model.error.questionExceeded %}
            <li>
              <a href="#question" data-wc-error-summary-link>Your question must be 500 characters or less</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
    {% endif %}
    <div class="govuk-form-group {% if model.error.nameEmpty %}govuk-form-group--error{% endif %}">
      <label class="govuk-label" for="name">
        Name
      </label>
      {% if model.error.nameEmpty %}
      <p class="govuk-error-message">
        <span class="govuk-visually-hidden">Error:</span> Enter your name
      </p>
      {% endif %}
      <input class="govuk-input {% if model.error.nameEmpty %}govuk-input--error{% endif %}" id="name" name="name" type="text" {% if model.error %}value="{{ model.error.name }}"{% endif %}>
    </div>
    <div class="govuk-character-count" data-module="govuk-character-count" data-maxlength="500">
      <div class="govuk-form-group {% if model.error.questionEmpty or model.error.questionExceeded %}govuk-form-group--error{% endif %}">
        <label class="govuk-label" for="message">
          Your question
        </label>
        {% if model.error.questionEmpty or model.error.questionExceeded %}
        <p class="govuk-error-message">
          <span class="govuk-visually-hidden">Error:</span>
          {% if model.error.questionEmpty %}
          Enter your question
          {% else %}
          Your question must be 500 characters or less
          {% endif %}
        </p>
        {% endif %}
        <textarea class="govuk-textarea{% if model.error.questionEmpty or model.error.questionExceeded %} wc-textarea--error{% endif %} govuk-js-character-count" id="question" name="question" rows="5" aria-describedby="question-info">{% if model.error %}{{ model.error.question }}{% endif %}</textarea>
      </div>
      <div id="question-info" class="wc-hint govuk-hint govuk-character-count__message">
        You can enter up to 500 characters
      </div>
    </div>
    <div data-wc-request-chat></div>
  </div>
</div>
{% elif model.view == 'OPEN' %}
<div class="wc__body" data-wc-body>
  <ul class="wc-list" data-wc-message-list>
    {% for message in model.messages %}
    {{ message.html | safe }}
    {% endfor %}
  </ul>
</div>
<div class="wc__footer">
  <form class="wc-message" data-wc-message>
    <label class="wc-message__label{% if model.textboxValue | length %} wc-message__label--hidden{% endif %}" for="message">
      {% if model.textboxValue %}{{ model.textboxValue }}{% else %}Your message{% endif %}
    </label>
    <div role="textbox" contenteditable="true" aria-multiline="{{ model.isMobile }}" aria-required="true" class="wc-message__textbox" id="message" name="message" data-wc-focus-parent data-wc-textbox></div>
    <input type="submit" class="wc-message__send" value="Send" data-wc-send-btn />
  </form>
  <div class="wc-settings">
    <!-- <a href="#" class="wc-settings-btn" role="button" data-module="govuk-button" data-wc-settings-btn>Settings</a> -->
    <a href="#" class="wc-audio-btn" role="button" data-module="govuk-button" data-wc-audio-btn>Turn audio <span>{% if model.hasAudio %}off{% else %}on{% endif %}</span></a>
    {% if model.messages | length %}
    <a href="#" class="wc-transcript-btn" download="transcript.txt" data-wc-transcript-btn>Save chat</a>
    {% endif %}
  </div>
  <!-- <span class="wc-credit">
    Powered by<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 345.88 61.48" xml:space="preserve" class="BrandLabel_BrandIcon__3K8rF" style="height: 12px; margin-left: 5px;"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><polygon points="103.11 9.41 133.9 9.41 133.9 21.36 115.34 21.36 115.34 28.82 130.53 28.82 130.53 40.78 115.34 40.78 115.34 48.67 133.9 48.67 133.9 60.58 103.11 60.58 103.11 9.41" style="fill: rgb(64, 64, 64);"></polygon><path d="M86.07,29.14c-.46-3.16-1.43-5.47-2.52-6.5a7.64,7.64,0,0,0-4.26-1.71c-2.36,0-4.25,1.47-5.22,4a27.54,27.54,0,0,0-1.73,10.71c0,9.05,2.35,13.69,7.11,13.69,3.62,0,6-3.16,6.62-8.84H97.94c-.49,6.3-2.22,11.54-5.22,15.35a15.88,15.88,0,0,1-12.63,5.63,20.1,20.1,0,0,1-10.75-2.91,18.52,18.52,0,0,1-6.93-9,37.37,37.37,0,0,1-2.54-13.9A40.85,40.85,0,0,1,62.55,20.3a22.87,22.87,0,0,1,7.25-9,18.29,18.29,0,0,1,8.86-2.73c6.63.21,11.52,2.52,14.2,6.09a28.26,28.26,0,0,1,4.75,14.52Z" style="fill: rgb(64, 64, 64);"></path><rect x="42.91" y="9.41" width="12.21" height="51.12" style="fill: rgb(64, 64, 64);"></rect><polygon points="0 9.41 10.99 9.41 24 37.55 24 26.47 24 9.41 35.77 9.41 35.77 60.53 24.17 60.53 11.49 32.86 11.45 44.79 11.49 60.53 0 60.53 0 9.41" style="fill: rgb(64, 64, 64);"></polygon><rect x="97.84" y="29.23" width="11.22" height="11.22" style="fill: rgb(64, 64, 64);"></rect><rect x="55.12" y="29.23" width="11.22" height="11.22" style="fill: rgb(64, 64, 64);"></rect><rect x="31.69" y="29.23" width="11.22" height="11.22" style="fill: rgb(64, 64, 64);"></rect><path d="M214.19,40.79a.28.28,0,0,0-.21-.1h-6.63a.29.29,0,0,0-.28.27c-.59,8.58-6.16,14.13-14.18,14.13-10.48,0-16.74-7.69-16.74-20.56,0-12.32,6.35-20,16.59-20,7.34,0,12.41,3.8,13.89,10.43a.27.27,0,0,0,.27.22h6.63a.32.32,0,0,0,.22-.1.3.3,0,0,0,.06-.23c-1.5-10.14-9.51-16.44-20.92-16.44-7.32,0-13.39,2.58-17.54,7.45C171.22,20.58,169,27.36,169,35c0,8.05,2,14.3,6.25,19.08s9.9,7.15,17.09,7.15c12.62,0,20.63-7.37,22-20.21A.28.28,0,0,0,214.19,40.79Z" style="fill: rgb(64, 64, 64);"></path><path d="M255.89,59.69,238.63,34.51l16.18-23.95a.51.51,0,0,0,.13-.34.57.57,0,0,0-.57-.57H247a.56.56,0,0,0-.47.25L234,28.68,222,9.91a.59.59,0,0,0-.48-.26h-8a.56.56,0,0,0-.5.3.57.57,0,0,0,0,.58l16.21,24L212,59.69a.57.57,0,0,0,.47.89H220a.55.55,0,0,0,.47-.25l13.39-19.84,12.94,19.83a.56.56,0,0,0,.47.26h8.14a.58.58,0,0,0,.5-.3A.57.57,0,0,0,255.89,59.69Z" style="fill: rgb(64, 64, 64);"></path><path d="M279.68,40c0-8.63-5.23-14.43-13-14.43s-13,5.94-13,14.43,5.36,14.43,13,14.43S279.68,48.67,279.68,40Zm-3.57,0c0,6.57-3.88,11.15-9.45,11.15-6.49,0-9.45-5.78-9.45-11.15,0-6.57,3.89-11.15,9.45-11.15S276.11,33.47,276.11,40Z" style="fill: rgb(64, 64, 64);"></path><path d="M286.52,26.64l-.34-.33-.2-.09h-2.32l-.2.09-.34.33-.09.2v26.4l.09.2.34.33.2.09H286l.2-.09.34-.33.08-.2V39c0-6.16,3.45-10.14,8.78-10.14,4.61,0,6.76,2.37,6.76,7.45v16.9l.08.2.34.33.2.09h2.32l.2-.09.34-.33.08-.2V36.55c0-3.27-.62-5.64-2-7.48-1.76-2.32-4.47-3.46-8.3-3.46a11.24,11.24,0,0,0-8.83,4.07V26.84Z" style="fill: rgb(64, 64, 64);"></path><path d="M332.81,41l.34-.34.08-.2v-1c0-4.53-1.21-7.88-3.81-10.54a12,12,0,0,0-8.48-3.28A11.58,11.58,0,0,0,312.29,29a15.87,15.87,0,0,0-4.11,11.25c0,4,.84,7,2.74,9.59a11.74,11.74,0,0,0,9.81,4.64c6.78,0,11.15-3.59,12.28-10.09l0-.21-.07-.23-.33-.4-.22-.1h-2.32l-.18.07-.33.27-.1.16,0,.15a8.4,8.4,0,0,1-8.74,7.1,8.1,8.1,0,0,1-6.81-3.32,12,12,0,0,1-2.16-6.78h20.85Zm-21-3.19a12.28,12.28,0,0,1,2.8-6.19,8.43,8.43,0,0,1,12.2-.25,10.28,10.28,0,0,1,2.78,6.44Z" style="fill: rgb(64, 64, 64);"></path><path d="M345.88,39.22a21.28,21.28,0,0,0-18.28-21A21.23,21.23,0,0,0,296,6.44,17.1,17.1,0,0,0,282.51,0,17.4,17.4,0,0,0,266,12.15a17.32,17.32,0,0,0-14.79,14.53,1.95,1.95,0,0,0,1.66,2.23,2,2,0,0,0,2.23-1.65,13.38,13.38,0,0,1,12.54-11.32,2,2,0,0,0,1.83-1.54,13.42,13.42,0,0,1,13-10.47,13.28,13.28,0,0,1,11.32,6.28,2,2,0,0,0,2.87.51,17.28,17.28,0,0,1,27.43,9.74A2,2,0,0,0,325.91,22a17.29,17.29,0,0,1-1.25,34.53H260.29a1.71,1.71,0,0,0-.49.07l-.2.17-.19.52,0,.26,1.81,2.64.38.24.13,0h62.9A21.24,21.24,0,0,0,345.88,39.22Z" style="fill: rgb(64, 64, 64);"></path><rect x="146.48" y="29.23" width="11.22" height="11.22" style="fill: rgb(64, 64, 64);"></rect></g></g></svg>
  </span> -->
</div>
{% elif model.view == 'TIMEOUT' %}
<div class="wc__body">
  <div class="wc-postchat">
    <h3 class="govuk-heading-m">Your session has timed out</h3>
    <p>You did not do anything for {{ model.timeout }}.</p>
    <div class="govuk-button-group">
      <button class="wc-submit-feedback-btn" data-module="govuk-button" data-wc-submit-feedback-btn>Give feedback</button>
      <a href="#" role="button" draggable="false" data-module="govuk-button" data-wc-close-btn>Cancel</button>
    </div>
  </div>
</div>
{% elif model.view == 'END' %}
<div class="wc__body">
  <div class="wc-postchat">
    <h3 class="govuk-heading-m">Are you sure you want to end the chat?</h3>
    <div class="govuk-button-group">
      <button class="wc-confirm-end-btn" data-module="govuk-button" data-wc-confirm-end-btn>End chat</button>
      <a href="#" role="button" draggable="false" data-module="govuk-button" data-wc-resume-btn>Resume chat</button>
    </div>
  </div>
</div>
{% elif model.view == 'FEEDBACK' %}
<div class="wc__body">
  <div class="wc-postchat">
    <h3 class="govuk-heading-m">Give feedback</h3>
    <p>Floodline webchat is in public beta</p>
    <div class="govuk-button-group">
      <button class="wc-feedback-btn" data-module="govuk-button" data-wc-feedback-btn>Submit</button>
      <a href="#" role="button" draggable="false" data-module="govuk-button" data-wc-close-btn>Cancel</button>
    </div>
  </div>
</div>
{% elif model.view == 'FINISH' %}
<div class="wc__body">
  <div class="wc-postchat">
    <h3 class="govuk-heading-m">Feedback submitted</h3>
    <p>Thank you for your feedback</p>
    <div>
      <a href="#" role="button" draggable="false" data-module="govuk-button" data-wc-close-btn>Close window</button>
    </div>
  </div>
</div>
{% else %}
<div class="wc__body">
  <div class="wc-prechat">
    <p>Connecting to an adviser</p>
  </div>
</div>
{% endif %}