{%- set display -%}
{% if model.queryType != item.group_type %}style="display:none"{% endif %}
{%- endset -%}

<tr class="defra-flood-levels-table__row" role="row" data-group-type="{{ item.group_type }}" data-lon="{{ item.lon }}" data-lat="{{ item.lat }}" {{ display | safe }}>
  <!-- Location -->
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--location{% if item.type === 'rainfall' %}-rainfall{% endif %}" role="rowheader">
    {% if item.type === 'rainfall' %}
    <a href="/rainfall-station/{{ item.id | urlencode }}">Rainfall at {{ item.name }}</a>
    {% else %}
    <a href="/station/{{ item.id | urlencode }}">
      {% if item.group_type == 'river' %}
      {{ item.riverName }} at
      {% elif item.group_type == 'sea' %}
      Sea level at
      {% endif %}
      {{ item.name }}
      {% if item.group_type == 'river' and item.type == 'tide' %}
      (tidal)
      {% endif %}
      {% if item.type == 'groundwater' %}
      borehole
      {% endif %}
      {% if item.isMultiStage %}- {% if item.isDownstage %}Downstream{% else %}Upstream{% endif %}{% endif %}
      {% if item.isWales %}(Natural Resources Wales){% endif %}
    </a>
    {% endif %}
    <span class="defra-flood-levels-table-meta">
      {% if item.latestDatetime %}
      Updated {{ item.latestDatetime }}
      {% else %}
      Data not available
      {% endif %}
    </span>
  </td>

  <!-- Rainfall -->
  {% if item.type == 'rainfall' %}
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--rainfall" role="cell">
    {{ item.rainfall1hr }}mm
    <span class="defra-flood-levels-table-meta">last hour</span>
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--rainfall" role="cell">
    {{ item.rainfall6hr }}mm
    <span class="defra-flood-levels-table-meta">last 6hrs</span>
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--rainfall" role="cell">
    {{ item.rainfall24hr }}mm
    <span class="defra-flood-levels-table-meta">last 24hrs</span>
  </td>

  <!-- Sea or tide -->
  {% elif item.type == 'tide' %}
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--trend" role="cell">
    {% if item.latestTrend %}
    <span class="defra-flood-levels-table-trend">
      <span class="defra-flood-levels-table-trend__icon defra-flood-levels-tables-trend__icon--{{ item.latestTrend }}">
        <svg width="16" height="16" viewBox="0 0 16 16" style="fill:currentColor">
          {% if item.latestTrend == 'rising' %}
          <path d="M6.992,6.4l-2.992,0l4,-6.4l4,6.4l-3.009,0l0,9.6l-1.999,0l0,-9.6Z"/>
          {% elif item.latestTrend == 'falling'%}
          <path d="M9.008,9.6l2.992,0l-4,6.4l-4,-6.4l3.009,0l-0,-9.6l1.999,0l-0,9.6Z"/>
          {% else %}
          <path d="M9.6,6.992l0,-2.992l6.4,4l-6.4,4l0,-3.009l-9.6,0l0,-1.999l9.6,0Z"/>
          {% endif %}
        </svg>
      </span>
      {{ item.latestTrend }}
    </span>
    {% else %}
    <span class="defra-flood-levels-table-na">n/a</a>
    {% endif %}
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--height" role="cell">
    {% if item.latestHeight %}
    <span class="defra-flood-levels-table-numeric">{{ item.latestHeight | toFixed(2) }}m</span>
    {% else %}
    <span class="defra-flood-levels-table-na">n/a</a>
    {% endif %}
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--state" role="cell">
    <span class="defra-flood-levels-table-na">n/a</a>
  </td>

  <!-- River or groundwater -->
  {% else %}
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--trend" role="cell">
    {% if item.latestTrend %}
    <span class="defra-flood-levels-table-trend">
      <span class="defra-flood-levels-table-trend__icon defra-flood-levels-tables-trend__icon--{{ item.latestTrend }}">
        <svg width="16" height="16" viewBox="0 0 16 16" style="fill:currentColor">
          {% if item.latestTrend == 'rising' %}
          <path d="M6.992,6.4l-2.992,0l4,-6.4l4,6.4l-3.009,0l0,9.6l-1.999,0l0,-9.6Z"/>
          {% elif item.latestTrend == 'falling'%}
          <path d="M9.008,9.6l2.992,0l-4,6.4l-4,-6.4l3.009,0l-0,-9.6l1.999,0l-0,9.6Z"/>
          {% else %}
          <path d="M9.6,6.992l0,-2.992l6.4,4l-6.4,4l0,-3.009l-9.6,0l0,-1.999l9.6,0Z"/>
          {% endif %}
        </svg>
      </span>
      {{ item.latestTrend }}
    </span>
    {% else %}
    <span class="defra-flood-levels-table-na">n/a</a>
    {% endif %}
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--height" role="cell">
    {% if item.latestHeight %}
    <span class="defra-flood-levels-table-numeric">{{ item.latestHeight | toFixed(2) }}m</span>
    {% else %}
    <span class="defra-flood-levels-table-na">n/a</a>
    {% endif %}
  </td>
  <td class="defra-flood-levels-table__cell defra-flood-levels-table__cell--state" role="cell">
    {% if item.latestHeight %}
    <span class="defra-flood-levels-table-state defra-flood-levels-table-state--{% if item.latestState == 'high' %}blue{% else %}grey{% endif %}">{{ item.latestState | capitalize }}</span>
    {% else %}
    <span class="defra-flood-levels-table-na">n/a</span>
    {% endif %}
  </td>
  {% endif %}
</tr>